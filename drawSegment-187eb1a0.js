import{C as g,d as u,e as w}from"./Test.module-87944f70.js";function O(t,o,i,c=10,s={},d={},l={}){const y=Object.freeze({type:"segmentEdit",target:t,currentTarget:t}),v=()=>{const n={type:"beforeSegmentEdit",target:t,currentTarget:t};o==null||o(n),i==null||i(y)},a=new g(0,0,c);a.fixedRadius=!0,a.radius=c,Object.assign(a.styles,s),Object.assign(a.hoverStyles,d),Object.assign(a.activeStyles,l);const e=new g(t.dx,t.dy,c);e.fixedRadius=!0,e.radius=c,Object.assign(e.styles,s),Object.assign(e.hoverStyles,d),Object.assign(e.activeStyles,l),u(a,n=>{t.dx-=n.dx,t.dy-=n.dy,t.x+=n.dx,t.y+=n.dy},v),u(e,n=>{t.dx+=n.dx,t.dy+=n.dy},v);const x=u(t,void 0,v),r=()=>{a.x=0,a.y=0,e.x=t.dx,e.y=t.dy};return t.addEventListener("beforeRender",r),t.add([a,e]),()=>{x(),t.removeEventListener("beforeRender",r),t.remove([a,e])}}function S(t,o,i={}){const c=s=>{const d=s.srcEvent;if(s.target!==s.currentTarget||d.button!==0)return;const{left:l,top:y}=t.canvas.getBoundingClientRect()||{left:0,top:0},v=(d.clientX-l-t.translate.x)/t.scale,a=(d.clientY-y-t.translate.y)/t.scale,e=v,x=a,r=new w(0,0,0,0);r.x=e,r.y=x,Object.assign(r.styles,i),t.add(r);const n=f=>{const p=f.srcEvent,h=(p.clientX-l-t.translate.x)/t.scale,j=(p.clientY-y-t.translate.y)/t.scale;r.dx=h-e,r.dy=j-x},b=f=>{if(t.removeEventListener("pointermove",n),t.removeEventListener("pointerup",b),r.dx===0&&r.dy===0){t.remove(r);return}o==null||o({type:"createSegment",target:r,currentTarget:t})};t.addEventListener("pointermove",n),t.addEventListener("pointerup",b)};return t.addEventListener("pointerdown",c),function(){t.removeEventListener("pointerdown",c)}}export{S as d,O as e};
