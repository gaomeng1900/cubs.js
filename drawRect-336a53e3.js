import{C as u,d as w,c as m,R as p}from"./Test.module-aa80c849.js";function L(t,g,o,x=10,h={},y={},d={}){const r=Object.freeze({type:"rectEdit",target:t,currentTarget:t}),l=()=>{const n={type:"beforeRectEdit",target:t,currentTarget:t};g==null||g(n),o==null||o(r)},a=new u(t.x,t.y,x);a.fixedRadius=!0,Object.assign(a.styles,h),Object.assign(a.hoverStyles,y),Object.assign(a.activeStyles,d),w(a,n=>{t.width+=t.x-n.x,t.height+=t.y-n.y,t.x=n.x,t.y=n.y},l);const e=new u(t.x+t.width,t.y,x);e.fixedRadius=!0,e.styles.zIndex=t.styles.zIndex,Object.assign(e.styles,h),Object.assign(e.hoverStyles,y),Object.assign(e.activeStyles,d),w(e,n=>{t.width=n.x-t.x,t.height+=t.y-n.y,t.y=n.y},l);const i=new u(t.x,t.y+t.height,x);i.fixedRadius=!0,i.styles.zIndex=t.styles.zIndex,Object.assign(i.styles,h),Object.assign(i.hoverStyles,y),Object.assign(i.activeStyles,d),w(i,n=>{t.width+=t.x-n.x,t.height=n.y-t.y,t.x=n.x},l);const s=new u(t.x+t.width,t.y+t.height,x);return s.fixedRadius=!0,s.styles.zIndex=t.styles.zIndex,Object.assign(s.styles,h),Object.assign(s.hoverStyles,y),Object.assign(s.activeStyles,d),w(s,n=>{t.width=n.x-t.x,t.height=n.y-t.y},l),w(t,void 0,l),t.addEventListener("beforeDraw",n=>{a.x=t.x,a.y=t.y,e.x=t.x+t.width,e.y=t.y,i.x=t.x,i.y=t.y+t.height,s.x=t.x+t.width,s.y=t.y+t.height}),new m([a,e,i,s])}function P(t,g,o={}){const x=h=>{const y=h.srcEvent;if(h.target!==h.currentTarget||y.button!==0)return;const{left:d,top:r}=t.canvas.getBoundingClientRect()||{left:0,top:0},l=(y.clientX-d-t.translate.x)/t.scale,a=(y.clientY-r-t.translate.y)/t.scale,e=l,i=a,s=new p(0,0,0,0);s.x=e,s.y=i,s.width=0,s.height=0,Object.assign(s.styles,o),t.add(s);const n=b=>{const f=b.srcEvent,j=(f.clientX-d-t.translate.x)/t.scale,O=(f.clientY-r-t.translate.y)/t.scale;s.width=j-e,s.height=O-i},v=b=>{if(t.removeEventListener("pointermove",n),t.removeEventListener("pointerup",v),s.width<0&&(s.width=-s.width),s.height<0&&(s.height=-s.height),s.width===0||s.height===0){t.remove(s);return}g==null||g({type:"rectCreation",target:s,currentTarget:t})};t.addEventListener("pointermove",n),t.addEventListener("pointerup",v)};return t.addEventListener("pointerdown",x),function(){t.removeEventListener("pointerdown",x)}}export{P as d,L as e};
