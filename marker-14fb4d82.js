var g=Object.defineProperty;var M=(i,e,t)=>e in i?g(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var E=(i,e,t)=>(M(i,typeof e!="symbol"?e+"":e,t),t);import{R as L,a as u,r as w,d as S}from"./Test.module-0a03da6d.js";class j extends L{constructor(t,s){super();E(this,"xStart",0);E(this,"xEnd",50);this.coordinator=t,this.config=s;const p=Math.random(),{color:l=w(.2,p)}=s||{},{min:x=-1/0,max:r=1/0}=s||{};this.style.fillStyle=l;const n=new u;n.style.zIndex=5,n.style.lineWidth=5,n.style.strokeStyle=w(.9,p),n.hoverStyle.strokeStyle=w(1,p+.5),this.add(n);const h=new u;h.style.zIndex=5,h.style.lineWidth=5,h.style.strokeStyle=w(.9,p),h.hoverStyle.strokeStyle=w(1,p+.5),this.add(h),this.addEventListener("beforeRender",d=>{this.y=t.top,this.height=t.viewportHeight,this.x=t.project(this.xStart,0)[0],this.width=t.project(this.xEnd,0)[0]-this.x,n.x=0-(n.style.lineWidth||1)/2,n.y=0,n.dx=0,n.dy=t.viewportHeight,h.x=this.width+(n.style.lineWidth||1)/2,h.y=0,h.dx=0,h.dy=t.viewportHeight}),s!=null&&s.draggable&&(S(this,d=>{if(this.xStart=t.unproject(d.x,0)[0],this.xEnd=t.unproject(d.x+this.width,0)[0],this.xStart<x){const a=this.xEnd-this.xStart;this.xStart=x,this.xEnd=x+a,d.x=t.project(x,0)[0]}if(this.xEnd>r){const a=this.xEnd-this.xStart;this.xEnd=r,this.xStart=r-a,d.x=t.project(r,0)[0]}}),S(n,d=>{this.x=t.project(this.xStart,0)[0],this.x+=d.dx,this.width-=d.dx,this.width<0&&(this.width=0),this.xStart=t.unproject(this.x,0)[0],this.xEnd=t.unproject(this.x+this.width,0)[0]},()=>{this.xStart=Math.min(Math.max(this.xStart,x),r),this.xEnd=Math.min(Math.max(this.xEnd,x),r),this.x=t.project(this.xStart,0)[0],this.width=t.project(this.xEnd,0)[0]-this.x}),S(h,d=>{this.width+=d.dx,this.width<0&&(this.width=0),this.xEnd=t.unproject(this.x+this.width,0)[0]},()=>{this.xStart=Math.min(Math.max(this.xStart,x),r),this.xEnd=Math.min(Math.max(this.xEnd,x),r),this.x=t.project(this.xStart,0)[0],this.width=t.project(this.xEnd,0)[0]-this.x}))}}function c(i,e,t){let s;const p=l=>{const x=l.srcEvent;if(x.button!==0||l.target!==l.currentTarget)return;x.preventDefault();const{left:r,top:n}=i.canvas.getBoundingClientRect()||{left:0,top:0},h=x.clientX-r,d=x.clientY-n;if(e.viewportX>h||e.viewportX+e.viewportWidth<h||e.viewportY>d||e.viewportY+e.viewportHeight<d)return;s=new j(e),i.add(s),s.xStart=e.unproject(h,0)[0],s.xEnd=e.unproject(h,0)[0];const a=m=>{const f=m.srcEvent.clientX-r;s.xEnd=e.unproject(f,0)[0],e.dispatchEvent({type:"update"})},y=m=>{i.removeEventListener("pointermove",a),i.removeEventListener("pointerup",y),i.remove(s);const v=new j(e,t);v.xStart=s.xStart,v.xEnd=s.xEnd,i.add(v)};i.addEventListener("pointermove",a),i.addEventListener("pointerup",y)};return i.addEventListener("pointerdown",p),()=>{i.removeEventListener("pointerdown",p),s&&i.children.has(s)&&i.remove(s)}}export{j as X,c as d};
