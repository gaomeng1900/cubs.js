import{_ as f,j as e}from"./index-264d5324.js";import{C as P,S as R,b as C,c as L,a as _,u as b,d as p,e as z}from"./Test.module-f3780946.js";import{r as y}from"./misc-39328f97.js";import{I as N}from"./Info-02b8a243.js";function T(t,a,d=5,u={}){const i=n=>{const o=n.srcEvent;if(n.target!==n.currentTarget||o.button!==0)return;const{left:l,top:s}=t.canvas.getBoundingClientRect()||{left:0,top:0},c=(o.clientX-l-t.translate.x)/t.scale,g=(o.clientY-s-t.translate.y)/t.scale,j=c,E=g,r=new P;r.x=j,r.y=E,r.radius=d,r.fixedRadius=!0,Object.assign(r.styles,u),t.add(r);const m=h=>{const v=h.srcEvent,w=(v.clientX-l-t.translate.x)/t.scale,S=(v.clientY-s-t.translate.y)/t.scale;r.x=w,r.y=S},x=h=>{t.removeEventListener("pointermove",m),t.removeEventListener("pointerup",x),a==null||a({type:"pointCreation",target:r,currentTarget:t})};t.addEventListener("pointermove",m),t.addEventListener("pointerup",x)};return t.addEventListener("pointerdown",i),function(){t.removeEventListener("pointerdown",i)}}function D(){const t=f.useRef(null);f.useEffect(()=>{const i=t.current,n=new R(i);C(n),L(n),_(n,5);const o=T(n,l=>{const s=l.target;console.log(s);const c=Math.random();s.styles.fillStyle=y(.5,c),s.styles.strokeStyle=y(1,c),s.styles.lineWidth=4,s.styles.stroke=!0,s.radius=10,z(s)},10);return()=>{o(),n.dispose()}},[]);const a=f.useRef(null),[d,u]=b(a);return e.jsx("div",{className:p.wrapper,children:e.jsxs("main",{className:p.mainPaper,ref:a,children:[e.jsx("canvas",{ref:t,className:p.canvas,width:d,height:u}),e.jsxs(N,{children:[e.jsx("div",{style:{fontSize:"1.1em",fontWeight:"500"},children:" 📷 画布："}),e.jsx("ul",{children:e.jsx("li",{children:"右键拖动，滚轮缩放"})}),e.jsx("div",{style:{fontSize:"1.1em",fontWeight:"500"},children:" 🖌️ 绘制点："}),e.jsxs("ul",{children:[e.jsx("li",{children:"点击空白处增加点"}),e.jsx("li",{children:"拖动点可改变位置"})]})]})]})})}export{D as default};
