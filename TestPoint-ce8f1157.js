import{r as f,j as e}from"./index-052255ea.js";import{C as P,S as R,s as C,a as L,b,u as z,c as p,d as N}from"./Test.module-87944f70.js";import{r as y}from"./misc-3d267c02.js";import{I as T}from"./Info-dc786ca5.js";function W(t,a,d=5,u={}){const i=n=>{const o=n.srcEvent;if(n.target!==n.currentTarget||o.button!==0)return;const{left:l,top:s}=t.canvas.getBoundingClientRect()||{left:0,top:0},c=(o.clientX-l-t.translate.x)/t.scale,g=(o.clientY-s-t.translate.y)/t.scale,j=c,E=g,r=new P;r.x=j,r.y=E,r.radius=d,r.fixedRadius=!0,Object.assign(r.styles,u),t.add(r);const m=h=>{const v=h.srcEvent,w=(v.clientX-l-t.translate.x)/t.scale,S=(v.clientY-s-t.translate.y)/t.scale;r.x=w,r.y=S},x=h=>{t.removeEventListener("pointermove",m),t.removeEventListener("pointerup",x),a==null||a({type:"pointCreation",target:r,currentTarget:t})};t.addEventListener("pointermove",m),t.addEventListener("pointerup",x)};return t.addEventListener("pointerdown",i),function(){t.removeEventListener("pointerdown",i)}}function I(){const t=f.useRef(null);f.useEffect(()=>{const i=t.current,n=new R(i);C(n),L(n),b(n,5);const o=W(n,l=>{const s=l.target;console.log(s);const c=Math.random();s.styles.fillStyle=y(.5,c),s.styles.strokeStyle=y(1,c),s.styles.lineWidth=4,s.styles.stroke=!0,s.radius=10,N(s)},10);return()=>{o(),n.dispose()}},[]);const a=f.useRef(null),[d,u]=z(a);return e.jsx("div",{className:p.wrapper,children:e.jsxs("main",{className:p.mainPaper,ref:a,children:[e.jsx("canvas",{ref:t,className:p.canvas,width:d,height:u}),e.jsxs(T,{children:[e.jsx("div",{style:{fontSize:"1.1em",fontWeight:"500"},children:" 📷 画布："}),e.jsx("ul",{children:e.jsx("li",{children:"右键拖动，滚轮缩放"})}),e.jsx("div",{style:{fontSize:"1.1em",fontWeight:"500"},children:" 🖌️ 绘制点："}),e.jsxs("ul",{children:[e.jsx("li",{children:"点击空白处增加点"}),e.jsx("li",{children:"拖动点可改变位置"})]})]})]})})}export{I as default};
