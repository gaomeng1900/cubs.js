import{C as u,d as v,m as f,R as m}from"./Test.module-fc98fbee.js";function L(t,h,y,g=10,r={},d={},o={}){const b=Object.freeze({type:"rectEdit",target:t,currentTarget:t}),l=()=>{const n={type:"beforeRectEdit",target:t,currentTarget:t};f(t),h==null||h(n),y==null||y(b)},i=new u(0,0,g);i.fixedRadius=!0,Object.assign(i.styles,r),Object.assign(i.hoverStyles,d),Object.assign(i.activeStyles,o),v(i,n=>{t.x+=n.dx,t.y+=n.dy,t.width-=n.dx,t.height-=n.dy,n.x=0,n.y=0},l);const s=new u(t.width,0,g);s.fixedRadius=!0,s.styles.zIndex=t.styles.zIndex,Object.assign(s.styles,r),Object.assign(s.hoverStyles,d),Object.assign(s.activeStyles,o),v(s,n=>{t.width+=n.dx,t.height-=n.dy,t.y+=n.dy,n.y=0},l);const a=new u(0,t.height,g);a.fixedRadius=!0,a.styles.zIndex=t.styles.zIndex,Object.assign(a.styles,r),Object.assign(a.hoverStyles,d),Object.assign(a.activeStyles,o),v(a,n=>{t.width-=n.dx,t.height+=n.dy,t.x+=n.dx,n.x=0},l);const e=new u(t.width,t.height,g);e.fixedRadius=!0,e.styles.zIndex=t.styles.zIndex,Object.assign(e.styles,r),Object.assign(e.hoverStyles,d),Object.assign(e.activeStyles,o),v(e,n=>{t.width+=n.dx,t.height+=n.dy},l);const c=v(t,void 0,l),x=()=>{i.x=0,i.y=0,s.x=t.width,s.y=0,a.x=0,a.y=t.height,e.x=t.width,e.y=t.height};return t.addEventListener("beforeRender",x),t.add([i,s,a,e]),()=>{t.remove([i,s,a,e]),t.removeEventListener("beforeRender",x),c()}}function z(t,h,y={}){const g=r=>{const d=r.srcEvent;if(r.target!==r.currentTarget||d.button!==0)return;const{left:o,top:b}=t.canvas.getBoundingClientRect()||{left:0,top:0},l=(d.clientX-o-t.translate.x)/t.scale,i=(d.clientY-b-t.translate.y)/t.scale,s=l,a=i,e=new m(0,0,0,0);e.x=s,e.y=a,e.width=0,e.height=0,Object.assign(e.styles,y),t.add(e);const c=n=>{const w=n.srcEvent,j=(w.clientX-o-t.translate.x)/t.scale,O=(w.clientY-b-t.translate.y)/t.scale;e.width=j-s,e.height=O-a},x=n=>{if(t.removeEventListener("pointermove",c),t.removeEventListener("pointerup",x),f(e),e.width===0||e.height===0){t.remove(e);return}h==null||h({type:"rectCreation",target:e,currentTarget:t})};t.addEventListener("pointermove",c),t.addEventListener("pointerup",x)};return t.addEventListener("pointerdown",g),function(){t.removeEventListener("pointerdown",g)}}export{z as d,L as e};
