import{_ as f,j as a}from"./index-b9dd1638.js";import{C,S as L,s as P,a as S,u as _,b as d,d as b}from"./Test.module-a0ac7215.js";import{r as h}from"./misc-3d267c02.js";function N(t,r,u=5,p={}){const i=n=>{const o=n.srcEvent;if(n.target!==n.currentTarget||o.button!==0)return;const{left:l,top:e}=t.canvas.getBoundingClientRect()||{left:0,top:0},c=(o.clientX-l-t.translate.x)/t.scale,g=(o.clientY-e-t.translate.y)/t.scale,E=c,j=g,s=new C;s.x=E,s.y=j,s.radius=u,s.fixedRadius=!0,Object.assign(s.styles,p),t.add(s);const m=x=>{const y=x.srcEvent,w=(y.clientX-l-t.translate.x)/t.scale,R=(y.clientY-e-t.translate.y)/t.scale;s.x=w,s.y=R},v=x=>{t.removeEventListener("pointermove",m),t.removeEventListener("pointerup",v),r==null||r({type:"pointCreation",target:s,currentTarget:t})};t.addEventListener("pointermove",m),t.addEventListener("pointerup",v)};return t.addEventListener("pointerdown",i),function(){t.removeEventListener("pointerdown",i)}}function k(){const t=f.useRef(null);f.useEffect(()=>{const i=t.current,n=new L(i);P(n),S(n);const o=N(n,l=>{const e=l.target;console.log(e);const c=Math.random();e.styles.fillStyle=h(.5,c),e.styles.strokeStyle=h(1,c),e.styles.lineWidth=4,e.styles.stroke=!0,e.radius=10,b(e)},10);return()=>{o(),n.dispose()}},[]);const r=f.useRef(null),[u,p]=_(r);return a.jsxs("div",{className:d.wrapper,children:[a.jsx("main",{className:d.mainPaper,ref:r,children:a.jsx("canvas",{ref:t,className:d.canvas,width:u,height:p})}),a.jsxs("footer",{className:d.footer,children:["🔔",a.jsx("div",{children:"绘制：空白区域左键加点；左键拖动图形"}),a.jsx("div",{children:"画布：滚轮缩放；右键平移"})]})]})}export{k as default};
