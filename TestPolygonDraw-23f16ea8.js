import{_ as c,j as e}from"./index-a1db033d.js";import{g,S as p,s as u,a as j,b as S,R as v,u as P,c as d}from"./Test.module-e0e1f2ce.js";import{d as w}from"./drawPolyline-9c25b997.js";import{e as R}from"./editPolygon-04679aac.js";import{b as m,r as _}from"./misc-3d267c02.js";import{I as C}from"./Info-3f4e75c8.js";import"./editPolyline-d73045a3.js";function E(t,a,o={},i={}){return w(t,s=>{if(t.remove(s.target),s.target.points.length<2)return;const r=new g;r.points=s.target.points,r.x=s.target.x,r.y=s.target.y,Object.assign(r.styles,o),t.add(r),a==null||a({type:"createPolygon",target:r,currentTarget:t})},o,i)}function J(){const t=c.useRef(null);c.useEffect(()=>{const y=t.current,s=new p(y);u(s),j(s),S(s,5);const r=E(s,n=>{m(n.target,[100,100,700,500]);const l=n.target;l.styles.fillStyle=_(.5),l.styles.lineWidth=10,l.styles.lineCap="round",l.styles.lineJoin="round",l.hoverStyles.strokeStyle="red";const x=R(l,f=>{m(f.target,[100,100,700,500])});s.add(x)},{},{fillStyle:"green"});{const n=new v;n.styles.zIndex=-1,n.styles.fillStyle="rgba(0, 0, 0, 0.1)",n.styles.pointerEvents="none",n.x=100,n.y=100,n.width=600,n.height=400,s.add(n)}return()=>{r(),s.dispose()}},[]);const a=c.useRef(null),[o,i]=P(a);return e.jsx("div",{className:d.wrapper,children:e.jsxs("main",{className:d.mainPaper,ref:a,children:[e.jsx("canvas",{ref:t,className:d.canvas,width:o,height:i}),e.jsxs(C,{children:[e.jsx("div",{style:{fontSize:"1.1em",fontWeight:"500"},children:" 📷 画布："}),e.jsx("ul",{children:e.jsx("li",{children:"右键拖动，滚轮缩放"})}),e.jsx("div",{style:{fontSize:"1.1em",fontWeight:"500"},children:" 🖌️ 绘制多边形："}),e.jsxs("ul",{children:[e.jsx("li",{children:"开始绘制：点击空白处"}),e.jsx("li",{children:"结束绘制：点击首点或尾点结束绘制"}),e.jsx("li",{children:"修改位置：拖动多边形"}),e.jsx("li",{children:"修改形状：拖动顶点"}),e.jsx("li",{children:"添加顶点：按住 meta 或 Ctrl 键，点击边"}),e.jsx("li",{children:"删除顶点：按住 meta 或 Ctrl 键，点击顶点"})]})]})]})})}const h=[[.9510565162951535,.3090169943749474],[.22451398828979272,.3090169943749474],[-.9510565162951535,.3090169943749475],[-.3632712640026805,-.11803398874989464],[.5877852522924729,-.8090169943749476],[.3632712640026804,-.11803398874989492],[0,1],[-.22451398828979263,.30901699437494745],[-.5877852522924732,-.8090169943749473],[0,-.38196601125010515]],b=[1,2,7,8,3,4,9,10,5,6];b.map(t=>({x:h[t-1][0],y:h[t-1][1]})).map(t=>({x:t.x*100+200,y:t.y*100+200}));export{J as default};
